function parseBubbles(e){var t=[];return e.forEach(function(e){e.radius>5&&t.push({parent:e,packageName:e.name,className:e.name,value:e.radius})}),{children:t}}var diameter=960,format=d3.format(",d"),color=d3.scale.category20c(),bubble=d3.layout.pack().sort(null).size([diameter,diameter]).padding(1.5),svg=d3.select("body").append("svg").attr("width",diameter).attr("height",diameter).attr("class","bubble");d3.json("map/bubbles",function(e,t){var a=svg.selectAll(".node").data(bubble.nodes(parseBubbles(t)).filter(function(e){return!e.children})).enter().append("g").attr("class","node").attr("transform",function(e){return"translate("+e.x+","+e.y+")"});a.append("title").text(function(e){return e.className+": "+format(e.value)}),a.append("circle").attr("r",function(e){return e.r}).style("fill",function(e){return color(e.packageName)}),a.append("text").attr("dy",".1em").style("text-anchor","middle").attr("font-size","10px").html(function(e){return e.className.substring(0,e.r/2)})}),d3.select(self.frameElement).style("height",diameter+"px");